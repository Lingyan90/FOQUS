{"CCSIFileMetaData":{"ID":"9b2da258f90e428ab7a427320c0908b7","CreationTime":"2023-10-06T14:58:26","ModificationTime":"2023-10-06T14:58:41","ChangeLog":{"2023-10-06T14:58:26":["00.00","15f3b4fe1d7c46e2a01a19445fa0e793","IDAES-FOQUS",""],"2023-10-06T14:58:41":["00.00","9b2da258f90e428ab7a427320c0908b7","IDAES-FOQUS",""]},"DisplayName":"IDAES-FOQUS","OriginalFilename":"IDAES-FOQUS.json","Application":"foqus","Description":"<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0//EN\" \"http://www.w3.org/TR/REC-html40/strict.dtd\">\n<html><head><meta name=\"qrichtext\" content=\"1\" /><style type=\"text/css\">\np, li { white-space: pre-wrap; }\n</style></head><body style=\" font-family:'Arial'; font-size:12pt; font-weight:400; font-style:normal;\">\n<p style=\" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;\">None</p></body></html>","MIMEType":"application/ccsi+foqus","Confidence":"experimental","Parents":[],"Role":"Input","UpdateMetadata":true,"Version":"00.00"},"Type":"FOQUS_Session","ID":"IDAES-FOQUS_231006145826","flowsheet":{"errorStat":100,"includeStatusOutput":true,"nodes":{"Flowhseet":{"modelType":0,"modelName":"","x":-280.0,"y":-180.0,"z":0.0,"scriptMode":"post","pythonCode":"# Import objects from pyomo package\nfrom pyomo.environ import ConcreteModel, SolverFactory,TransformationFactory, value\n\nimport pyutilib.subprocess.GlobalData\npyutilib.subprocess.GlobalData.DEFINE_SIGNAL_HANDLERS_DEFAULT = False\n\n# Import the main FlowsheetBlock from IDAES. The flowsheet block will contain the unit model\n\nimport idaes\nfrom idaes.core.base.flowsheet_model import FlowsheetBlock\n\n# Import the BTX_ideal property package to create a properties block for the flowsheet\nfrom idaes.models.properties.activity_coeff_models import BTX_activity_coeff_VLE\n\n# Import heater unit model from the model library\nfrom idaes.models.unit_models.heater import Heater\n\n# Import flash unit model from the model library\nfrom idaes.models.unit_models.flash import Flash\n\n# Import methods for unit model connection and flowsheet initialization\nfrom pyomo.network import Arc, SequentialDecomposition\n\n# Import idaes logger to set output levels\nimport idaes.logger as idaeslog\n\n# Create the ConcreteModel and the FlowsheetBlock, and attach the flowsheet block to it.\nm = ConcreteModel()\n\nm.fs = FlowsheetBlock(dynamic=False) # dynamic or ss flowsheet needs to be specified here\n\n# Add properties parameter block to the flowsheet with specifications\nm.fs.properties = BTX_activity_coeff_VLE.BTXParameterBlock(valid_phase=\n                                                     ('Liq', 'Vap'),\n                                                     activity_coeff_model=\n                                                     \"Ideal\")\n\n# Create an instance of the heater unit, attaching it to the flowsheet\n# Specify that the property package to be used with the heater is the one we created earlier.\nm.fs.heater = Heater(property_package= m.fs.properties)\n\nm.fs.flash = Flash(property_package= m.fs.properties)\n\n# Connect heater and flash models using an arc\nm.fs.heater_flash_arc = Arc(source=m.fs.heater.outlet, destination=m.fs.flash.inlet)\n\nTransformationFactory(\"network.expand_arcs\").apply_to(m)\n\n#Feed Specifications to heater\nm.fs.heater.inlet.flow_mol.fix(x[\"heater_inlet_molflow\"]) # mol/s\nm.fs.heater.inlet.mole_frac_comp[0, \"benzene\"].fix(x[\"heater_inlet_benzene_molfrac\"])\nm.fs.heater.inlet.mole_frac_comp[0, \"toluene\"].fix(x[\"heater_inlet_toluene_molfrac\"])\nm.fs.heater.inlet.pressure.fix(x[\"heater_inlet_pressure\"]) # Pa\nm.fs.heater.inlet.temperature.fix(x[\"heater_inlet_temperature\"]) # K\n\n# Unit model specifications\nm.fs.heater.outlet.temperature.fix(x[\"heater_outlet_temperature\"]) # K\nm.fs.flash.heat_duty.fix(x[\"flash_heat_duty\"]) # W\nm.fs.flash.deltaP.fix(x[\"flash_pressure_drop\"]) # Pa\n\n#Flowsheet Initialization\ndef function(unit):\n        unit.initialize(outlvl=1)\n\nopt = SolverFactory('ipopt')\nseq = SequentialDecomposition()\nseq.options.select_tear_method = \"heuristic\"\nseq.run(m, function)\n\n# Solve the flowsheet using ipopt\nopt = SolverFactory('ipopt')\nsolve_status = opt.solve(m)\n\n#Assign the simulation result from IDAES model to FOQUS output values\nf[\"flash_liq_molflow\"] = value(m.fs.flash.liq_outlet.flow_mol[0])\nf[\"flash_liq_benzene_molfrac\"] = value(m.fs.flash.liq_outlet.mole_frac_comp[0,\"benzene\"])\nf[\"flash_liq_toluene_molfrac\"] = value(m.fs.flash.liq_outlet.mole_frac_comp[0,\"toluene\"])\nf[\"flash_liq_temperature\"] = value(m.fs.flash.liq_outlet.temperature[0])\nf[\"flash_liq_pressure\"] = value(m.fs.flash.liq_outlet.pressure[0])\nf[\"flash_vap_molflow\"] = value(m.fs.flash.vap_outlet.flow_mol[0])\nf[\"flash_vap_benzene_molfrac\"] = value(m.fs.flash.vap_outlet.mole_frac_comp[0,\"benzene\"])\nf[\"flash_vap_toluene_molfrac\"] = value(m.fs.flash.vap_outlet.mole_frac_comp[0,\"toluene\"])\nf[\"flash_vap_temperature\"] = value(m.fs.flash.vap_outlet.temperature[0])\nf[\"flash_vap_pressure\"] = value(m.fs.flash.vap_outlet.pressure[0])\nf[\"heater_heat_duty\"] = value(m.fs.heater.heat_duty[0])","calcError":0,"options":{"order":[],"options":{}},"turbApp":null,"turbSession":null,"synced":true}},"edges":[],"input":{"graph":{},"Flowhseet":{"heater_inlet_molflow":{"dtype":"float","value":0.277778,"min":0.01,"max":0.4,"default":0.0,"ipvname":null,"opvname":null,"unit":"mol/s","set":"user","desc":"","scaling":"None","tags":[],"dist":{"type":"U","firstParamValue":null,"secondParamValue":null}},"heater_inlet_pressure":{"dtype":"float","value":101325.0,"min":1.0,"max":300000.0,"default":0.0,"ipvname":null,"opvname":null,"unit":"Pa","set":"user","desc":"","scaling":"None","tags":[],"dist":{"type":"U","firstParamValue":null,"secondParamValue":null}},"heater_inlet_temperature":{"dtype":"float","value":353.0,"min":2.0,"max":500.0,"default":0.0,"ipvname":null,"opvname":null,"unit":"K","set":"user","desc":"","scaling":"None","tags":[],"dist":{"type":"U","firstParamValue":null,"secondParamValue":null}},"heater_inlet_benzene_molfrac":{"dtype":"float","value":0.4,"min":0.01,"max":1.0,"default":0.0,"ipvname":null,"opvname":null,"unit":"","set":"user","desc":"","scaling":"None","tags":[],"dist":{"type":"U","firstParamValue":null,"secondParamValue":null}},"heater_inlet_toluene_molfrac":{"dtype":"float","value":0.6,"min":0.01,"max":1.0,"default":0.0,"ipvname":null,"opvname":null,"unit":"","set":"user","desc":"","scaling":"None","tags":[],"dist":{"type":"U","firstParamValue":null,"secondParamValue":null}},"heater_outlet_temperature":{"dtype":"float","value":370.0,"min":2.0,"max":500.0,"default":0.0,"ipvname":null,"opvname":null,"unit":"K","set":"user","desc":"","scaling":"None","tags":[],"dist":{"type":"U","firstParamValue":null,"secondParamValue":null}},"flash_heat_duty":{"dtype":"float","value":0.0,"min":0.0,"max":10000.0,"default":0.0,"ipvname":null,"opvname":null,"unit":"W","set":"user","desc":"","scaling":"None","tags":[],"dist":{"type":"U","firstParamValue":null,"secondParamValue":null}},"flash_pressure_drop":{"dtype":"float","value":0.0,"min":0.0,"max":50000.0,"default":0.0,"ipvname":null,"opvname":null,"unit":"Pa","set":"user","desc":"","scaling":"None","tags":[],"dist":{"type":"U","firstParamValue":null,"secondParamValue":null}}}},"output":{"graph":{"error":{"dtype":"float","value":100.0,"min":0.0,"max":1.0,"default":0.0,"ipvname":null,"opvname":null,"unit":"","set":"user","desc":"Flowsheet error code","scaling":"None","tags":[],"dist":{"type":"U","firstParamValue":null,"secondParamValue":null}}},"Flowhseet":{"heater_heat_duty":{"dtype":"float","value":2813.471284397209,"min":0.0,"max":1.0,"default":0.0,"ipvname":null,"opvname":null,"unit":"W","set":"user","desc":"","scaling":"None","tags":[],"dist":{"type":"U","firstParamValue":null,"secondParamValue":null}},"flash_liq_molflow":{"dtype":"float","value":0.214563798174431,"min":0.0,"max":1.0,"default":0.0,"ipvname":null,"opvname":null,"unit":"mol/s","set":"user","desc":"","scaling":"None","tags":[],"dist":{"type":"U","firstParamValue":null,"secondParamValue":null}},"flash_liq_pressure":{"dtype":"float","value":101325.0,"min":0.0,"max":1.0,"default":0.0,"ipvname":null,"opvname":null,"unit":"Pa","set":"user","desc":"","scaling":"None","tags":[],"dist":{"type":"U","firstParamValue":null,"secondParamValue":null}},"flash_liq_temperature":{"dtype":"float","value":370.0,"min":0.0,"max":1.0,"default":0.0,"ipvname":null,"opvname":null,"unit":"K","set":"user","desc":"","scaling":"None","tags":[],"dist":{"type":"U","firstParamValue":null,"secondParamValue":null}},"flash_liq_benzene_molfrac":{"dtype":"float","value":0.35010232830385374,"min":0.0,"max":1.0,"default":0.0,"ipvname":null,"opvname":null,"unit":"","set":"user","desc":"","scaling":"None","tags":[],"dist":{"type":"U","firstParamValue":null,"secondParamValue":null}},"flash_liq_toluene_molfrac":{"dtype":"float","value":0.6498976716961463,"min":0.0,"max":1.0,"default":0.0,"ipvname":null,"opvname":null,"unit":"","set":"user","desc":"","scaling":"None","tags":[],"dist":{"type":"U","firstParamValue":null,"secondParamValue":null}},"flash_vap_molflow":{"dtype":"float","value":0.06321420182556901,"min":0.0,"max":1.0,"default":0.0,"ipvname":null,"opvname":null,"unit":"mol/s","set":"user","desc":"","scaling":"None","tags":[],"dist":{"type":"U","firstParamValue":null,"secondParamValue":null}},"flash_vap_pressure":{"dtype":"float","value":101325.0,"min":0.0,"max":1.0,"default":0.0,"ipvname":null,"opvname":null,"unit":"Pa","set":"user","desc":"","scaling":"None","tags":[],"dist":{"type":"U","firstParamValue":null,"secondParamValue":null}},"flash_vap_temperature":{"dtype":"float","value":370.0,"min":0.0,"max":1.0,"default":0.0,"ipvname":null,"opvname":null,"unit":"K","set":"user","desc":"","scaling":"None","tags":[],"dist":{"type":"U","firstParamValue":null,"secondParamValue":null}},"flash_vap_benzene_molfrac":{"dtype":"float","value":0.5693643777822011,"min":0.0,"max":1.0,"default":0.0,"ipvname":null,"opvname":null,"unit":"","set":"user","desc":"","scaling":"None","tags":[],"dist":{"type":"U","firstParamValue":null,"secondParamValue":null}},"flash_vap_toluene_molfrac":{"dtype":"float","value":0.43063562221779905,"min":0.0,"max":1.0,"default":0.0,"ipvname":null,"opvname":null,"unit":"","set":"user","desc":"","scaling":"None","tags":[],"dist":{"type":"U","firstParamValue":null,"secondParamValue":null}}}},"tearSolver":"Wegstein","tearMaxIt":40,"tearTol":0.001,"tearTolType":"abs","tearLog":false,"tearLogStub":"tear_log","tearBound":false,"wegAccMax":9.0,"wegAccMin":-9.0,"singleCount":0,"onlySingleNode":null,"simList":{},"pre_solve_nodes":[],"post_solve_nodes":[],"no_solve_nodes":[],"turbineSim":null,"input_vectorlist":{"Flowhseet":{}},"output_vectorlist":{"Flowhseet":{}},"results":{"__columns":["set","result","time","solution_time","err","input.Flowhseet.heater_inlet_molflow","input.Flowhseet.heater_inlet_pressure","input.Flowhseet.heater_inlet_temperature","input.Flowhseet.heater_inlet_benzene_molfrac","input.Flowhseet.heater_inlet_toluene_molfrac","input.Flowhseet.heater_outlet_temperature","input.Flowhseet.flash_heat_duty","input.Flowhseet.flash_pressure_drop","output.graph.error","output.Flowhseet.heater_heat_duty","output.Flowhseet.flash_liq_molflow","output.Flowhseet.flash_liq_pressure","output.Flowhseet.flash_liq_temperature","output.Flowhseet.flash_liq_benzene_molfrac","output.Flowhseet.flash_liq_toluene_molfrac","output.Flowhseet.flash_vap_molflow","output.Flowhseet.flash_vap_pressure","output.Flowhseet.flash_vap_temperature","output.Flowhseet.flash_vap_benzene_molfrac","output.Flowhseet.flash_vap_toluene_molfrac","node_err.Flowhseet","turb.Flowhseet"],"__indexes":[0,1,2,3,4,5,6,7],"__filters":{"none":{"filterTerm":null,"sortTerm":null,"no_results":true},"all":{"filterTerm":null,"sortTerm":null,"no_results":false}},"__current_filter":null,"0":["Single_runs","single_0","2023-10-06T15:50:15.351695",0.009015321731567383,1.0,0.277778,101325.0,353.0,0.4,0.6,370.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,21.0,""],"1":["Single_runs","single_0_0001","2023-10-06T15:53:42.678198",2.108888626098633,1.0,0.277778,101325.0,353.0,0.4,0.6,370.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,21.0,""],"2":["Single_runs","single_0_0002","2023-10-06T16:03:36.144262",0.012926101684570312,1.0,0.277778,101325.0,353.0,0.4,0.6,370.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,21.0,""],"3":["Single_runs","single_0_0003","2023-10-06T16:06:01.987190",0.04487872123718262,1.0,0.277778,101325.0,353.0,0.4,0.6,370.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,21.0,""],"4":["Single_runs","single_0_0004","2023-10-06T16:09:01.689615",0.10372257232666016,1.0,0.277778,101325.0,353.0,0.4,0.6,370.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,21.0,""],"5":["Single_runs","single_0_0005","2023-10-06T16:10:04.768780",0.008893489837646484,1.0,0.277778,101325.0,353.0,0.4,0.6,370.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,21.0,""],"6":["Single_runs","single_0_0006","2023-10-06T18:37:10.640976",3.0733468532562256,100.0,0.277778,101325.0,353.0,0.4,0.6,370.0,0.0,0.0,100.0,2813.471284397209,0.214563798174431,101325.0,370.0,0.35010232830385374,0.6498976716961463,0.06321420182556901,101325.0,370.0,0.5693643777822011,0.43063562221779905,0.0,""],"7":["Single_runs","single_0_0007","2023-10-06T18:37:21.353500",2.786341667175293,100.0,0.277778,101325.0,353.0,0.4,0.6,370.0,0.0,0.0,100.0,2813.471284397209,0.214563798174431,101325.0,370.0,0.35010232830385374,0.6498976716961463,0.06321420182556901,101325.0,370.0,0.5693643777822011,0.43063562221779905,0.0,""],"calculated_columns":{}}},"optProblem":{"obj":[],"g":[],"objtype":0,"custpy":"","v":[],"vs":[],"samp":{},"solver":null,"solverOptions":{}},"surrogateProblem":{"ACOSSO":{"input":[],"output":[],"inputOptions":{},"outputOptions":{},"options":{"Data Filter":"all","Use Flowsheet Data":"Yes","Input Data File":"acosso\\xdat.csv","Output Data File":"acosso\\ydat.csv","Model File":"acosso_fit.rds","FOQUS Model (for UQ)":"acosso_surrogate_uq.py","FOQUS Model (for Flowsheet)":"acosso_surrogate_fs.py","CV":"bic","Order":2}}},"surrogateCurrent":"ACOSSO","uqSimList":[],"uqFilterResultsList":[],"sdoeSimList":[],"sdoeFilterResultsList":[],"odoeCandList":[],"odoeEvalList":[]}